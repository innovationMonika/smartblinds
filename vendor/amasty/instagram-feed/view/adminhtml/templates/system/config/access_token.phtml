<?php
/**
* @author Amasty Team
* @copyright Copyright (c) 2022 Amasty (https://www.amasty.com)
* @package Instagram Feed for Magento 2
*/
?>
<?php
/**
 * @var \Amasty\InstagramFeed\Block\Adminhtml\System\Config\AcessToken $block
 * @var \Magento\Framework\Escaper $escaper
 */
?>
<button id="<?= $block->getHtmlId() ?>"
        type="button"
        data-mage-init='{"Amasty_InstagramFeed/js/access_token":<?= /* @noEscape */ $block->getJsonConfig();?>}'>
    <?= $escaper->escapeHtml($block->getButtonLabel()) ?>
</button>

<div class="aminst-modal">
    <div class="aminst-modal-body-content">
        <p><?= $escaper->escapeHtml(__('Something went wrong while token generation')) ?></p>
        <a class="aminst-show-more"><?= $escaper->escapeHtml(__('Show more')) ?></a>
        <p class="aminst-error-text message message-error"></p>
    </div>
</div>

<?php if (!$block->getIsConnectionSecure()): ?>
    <script>
        require([
                'jquery',
                'Magento_Ui/js/modal/alert',
            ], function($, alert) {
                alert({
                    content: '<?= $escaper->escapeHtml(__('Your site is configured to use HTTP connection and Instagram API does not allow it. Please configure HTTPS connection for your site.')) ?>'
                });
            }
        );
    </script>
<?php endif; ?>
