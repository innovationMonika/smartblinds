define(["jquery","underscore"],function(a,m){"use strict";var u=a(window),o={};function p(t){typeof AEC!="undefined"&&typeof AEC.Const!="undefined"&&typeof dataLayer!="undefined"&&(AEC.Const.COOKIE_DIRECTIVE?AEC.CookieConsent.queue(t).process():t.apply(window,[]))}function f(t){return function(){var e=a(t),n=e.closest(".swatch-attribute"),s=n.data("attribute-code"),r=0;if(!o[s]&&(o.widthheight||s=="montage")){r=h(s);var c={step:r,stepname:s,option:e.data("option-label")};o[s]=c,d(c)}}}function y(t){return function(){var e=a(t),n=e.data("option-code"),s="",r=0;if(e.data("option-element-type")==="text"&&(s=e.text()),m.contains(["image","color"],e.data("option-element-type"))&&(s=e.find(".mageworx-swatch-info").text()),!o[n]&&(o.widthheight||n=="montage")){r=h(n);var c={step:r,stepname:n,option:s};o[n]=c,d(c)}}}function w(t,e){return function(){if(!(!t||!e||o.widthheight)){var n={step:"2",stepname:"width_height",option:t+" x "+e};o.widthheight=n,d(n)}}}function d(t){l(t),t.event="virtualVariantView",dataLayer.push(t)}function l(t){switch(t.stepname){case"motor_side":i("system_color");case"system_color":i("system_size");case"system_size":i("system_type");case"system_type":i("color");case"color":i("transparency");break}}function i(t){o[t]||f(a('[data-attr-name="'+t+'"]').closest(".swatch-attribute").find(".selected").eq(0))()}function h(t){var e=0;switch(t){case"montage":e=1;break;case"transparency":e=3;break;case"color":e=4;break;case"system_type":e=5;break;case"system_size":e=6;break;case"system_color":e=7;break;case"motor_side":e=8;break}return e}var g={_create:function(){return u.on("swatches-click",function(t,e){p(f(e))}),u.on("options-click",function(t,e){p(y(e))}),u.on("option-width-height-change",function(t,e,n){p(w(e,n))}),this._super()}};return function(t){return a.widget("mage.progressButton",t,g),a.mage.progressButton}});
