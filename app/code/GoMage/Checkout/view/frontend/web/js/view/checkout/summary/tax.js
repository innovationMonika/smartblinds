define(["ko","Magento_Checkout/js/view/summary/abstract-total","Magento_Checkout/js/model/quote","Magento_Checkout/js/model/totals","mage/translate","underscore"],function(f,r,s,a,l,c){"use strict";var g=window.checkoutConfig.includeTaxInGrandTotal,o=window.checkoutConfig.isFullTaxSummaryDisplayed,d=window.checkoutConfig.isZeroTaxDisplayed,u=0,i=0;return r.extend({defaults:{isTaxDisplayedInGrandTotal:g,notCalculatedMessage:l("Not yet calculated"),template:"Magento_Tax/checkout/summary/tax"},totals:s.getTotals(),isFullTaxSummaryDisplayed:o,ifShowValue:function(){return window.checkoutConfig.isHideTax?!1:this.isFullMode()&&this.getPureValue()==0?d:!0},ifShowDetails:function(){return this.isFullMode()?this.getPureValue()>0&&o:!1},getPureValue:function(){var t=0,e;return this.totals()&&(e=a.getSegment("tax"),e&&(t=e.value)),t},isCalculated:function(){return this.totals()&&this.isFullMode()&&a.getSegment("tax")!=null},getValue:function(){var t;return t=a.getSegment("tax").value,this.getFormattedPrice(t)},formatPrice:function(t){return this.getFormattedPrice(t)},getTaxAmount:function(t,e){var n=0;return u=t.amount,i=t.rates,c.each(i,function(m){n+=parseFloat(m.percent)}),this.getFormattedPrice(this.getPercentAmount(u,n,e))},getPercentAmount:function(t,e,n){return parseFloat(t*n/e)},getDetails:function(){var t=a.getSegment("tax");return t&&t.extension_attributes?t.extension_attributes.tax_grandtotal_details:[]}})});
