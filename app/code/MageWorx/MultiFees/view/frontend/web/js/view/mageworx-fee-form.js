define(["jquery","ko","Magento_Ui/js/form/form","Magento_Checkout/js/model/quote","MageWorx_MultiFees/js/model/fee","MageWorx_MultiFees/js/action/apply-fees","MageWorx_MultiFees/js/model/fee-messages","mage/translate","Magento_Checkout/js/action/get-payment-information","Magento_Checkout/js/model/totals","Magento_Checkout/js/model/step-navigator","Magento_Checkout/js/model/cart/totals-processor/default","underscore"],function(s,r,n,u,a,l,d,c,g,o,i,f,m){"use strict";var p=c("You need to select required additional fees to proceed to checkout"),t=r.observable(!1);return n.extend({initialize:function(){return this._super(),this},isLoading:t,onSubmit:function(){if(this.source.set("params.invalid",!1),this.source.trigger("mageworxFeeForm.data.validate"),this.source.get("params.invalid"))return d.addErrorMessage({message:p}),this;t(!0);var e=this.source.get("mageworxFeeForm");return e.type=1,l(e,t,"mageworx-fee-form"),this},isDisplayTitle:function(){return a.allData().is_display_title},isDisplayed:function(){return a.allData().is_enable},updateTotals:function(){if(t(!1),m.isEmpty(i.steps())&&f.estimateTotals(u.shippingAddress()),i.getActiveItemIndex()){var e=s.Deferred();o.isLoading(!0),g(e),s.when(e).done(function(){o.isLoading(!1)})}}})});
