define(["underscore","./option-params"],function(d,u){"use strict";return{init:function(n){this.$widthField=n},calculateWidthHeightRegularPrice:function(){let n=a();return n!==null?l(n):null},calculateWidthHeightFinalPrice:function(){let n=a();if(n!==null){const i=u.get(),t=window.jsonConfig.optionPrices[i.productId].basePrice.amount,e=window.jsonConfig.optionPrices[i.productId].baseOldPrice.amount;return n*=t/e,l(n)}return null},calculateCurtainTracksRegularPrice:function(){let n=s(this.$widthField);return n!==null?o(n):null},calculateCurtainTracksFinalPrice:function(){let n=s(this.$widthField);return n!==null?(n*=window.curtainTracks.finalPrice/window.curtainTracks.regularPrice,o(n)):null}};function l(n){return n+n*window.jsonConfig.taxRate/100}function o(n){return n+n*window.curtainTracks.taxRate/100}function a(){const n=u.get();if(!n)return null;const i=window.jsonConfig,t=n.input.width,e=n.input.height,c=i.optionPrices[n.productId].smartblindsPrice.amount,r=n.system;return t*e/1e6*parseFloat(r.priceCoefficient)*c+t/1e3*r.meterPrice+r.basePrice}function s(n){if(!n)return null;const i=parseFloat(n.val());if(isNaN(i))return null;let t=null;const e=window.curtainTracks.prices;for(const[c,r]of Object.entries(e))t===null&&i<=c&&(t=r);return t}});
