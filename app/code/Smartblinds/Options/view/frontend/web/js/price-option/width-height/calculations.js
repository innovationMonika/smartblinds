define(["underscore"],function(r){"use strict";return{calcMaxWidth:function(e){var t=[];if(e.system.systemCategory!=="venetian_blinds"&&e.system.systemCategory!=="honeycomb_blinds"&&(t=[a(e),o(e)]),e.product.maxWidth!==null&&t.push(e.product.maxWidth),e.system.maxWidth&&e.system.maxWidth>0&&t.push(e.system.maxWidth),e.system.systemCategory!=="venetian_blinds"&&e.system.systemCategory!=="honeycomb_blinds"){var i=n(e);(!i.railroad||i.railroad&&i.usableWidth<i.inputWidth&&i.usableHeight<i.inputHeight)&&t.push(i.usableWidth)}var s=Math.floor(r.min(t));return s>=0?s:0},calcMaxHeight:function(e){var t=[];if(e.system.systemCategory!=="venetian_blinds"&&e.system.systemCategory!=="honeycomb_blinds"&&(t=[u(e),h(e),m(e),c(e)]),e.product.maxHeight!==null&&t.push(e.product.maxHeight),e.system.maxHeight&&t.push(e.system.maxHeight),e.system.systemCategory!=="venetian_blinds"&&e.system.systemCategory!=="honeycomb_blinds"){var i=n(e);i.railroad&&i.usableWidth<i.inputWidth&&i.usableHeight!==i.inputHeight&&t.push(i.usableHeight)}var s=Math.floor(r.min(t));return s>=0?s:0}};function n(e){return{usableWidth:parseInt(e.product.width)-100,usableHeight:parseInt(e.product.width)-200,inputWidth:e.input.width,inputHeight:e.input.height,railroad:e.product.railroad}}function a(e){var t=e.system,i=e.input.height;return 1019367991845e-4*t.torque/(e.product.weight*parseFloat(t.priceCoefficient)*i+1e3*t.bottomBarWeight)/((e.product.thickness+t.tubeDiameter/2)/1e3)}function o(e){var t=e.system;return Math.pow(t.bending*t.tube384Ei/(5*r.reduce([e.product.weight/1e8*parseFloat(t.priceCoefficient)*e.input.height,t.bottomBarWeight/1e5,t.tubeWeight/1e5],function(i,s){return i+s},0)),1/4)}function u(e){var t=e.system,i=e.input.width,s=e.product.thickness;return(101.9367991845*t.torque/((s*parseFloat(t.priceCoefficient)+t.tubeDiameter/2)/1e3)-.001*i*t.bottomBarWeight)/(1e-6*e.product.weight*i)}function h(e){var t=e.system,i=e.input.width;return(2e8*t.tube384Ei*t.bending-1e4*Math.pow(i,4)*(t.bottomBarWeight+t.tubeWeight))/(e.product.weight*parseFloat(t.priceCoefficient)*Math.pow(i,4))/10}function m(e){var t=e.system;return Math.PI*(Math.pow(t.systemDiameter,2)-Math.pow(t.tubeDiameter,2))/(4*e.product.thickness*parseFloat(t.priceCoefficient))}function c(e){var t=e.system;return Math.PI*20*(t.systemDiameter+e.product.thickness*(20-1))}});
