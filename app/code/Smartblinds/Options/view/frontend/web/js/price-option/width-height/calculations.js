define(["underscore"],function(r){"use strict";return{calcMaxWidth:function(t){var e=[];if(t.system.systemCategory!=="venetian_blinds"&&t.system.systemCategory!=="honeycomb_blinds"&&(e=[a(t),o(t)]),t.product.maxWidth!==null&&e.push(t.product.maxWidth),t.system.maxWidth&&t.system.maxWidth>0&&e.push(t.system.maxWidth),t.system.systemCategory!=="venetian_blinds"&&t.system.systemCategory!=="honeycomb_blinds"){var i=n(t);(!i.railroad||i.railroad&&i.usableWidth<i.inputWidth&&i.usableHeight<i.inputHeight)&&e.push(i.usableWidth)}var s=Math.floor(r.min(e));return s>=0?s:0},calcMaxHeight:function(t){var e=[];if(t.system.systemCategory!=="venetian_blinds"&&t.system.systemCategory!=="honeycomb_blinds"&&(e=[u(t),h(t),m(t),c(t)]),t.product.maxHeight!==null&&e.push(t.product.maxHeight),t.system.maxHeight&&e.push(t.system.maxHeight),t.system.systemCategory!=="venetian_blinds"&&t.system.systemCategory!=="honeycomb_blinds"){var i=n(t);i.railroad&&i.usableWidth<i.inputWidth&&i.usableHeight!==i.inputHeight&&e.push(i.usableHeight)}var s=Math.floor(r.min(e));return s>=0?s:0}};function n(t){return{usableWidth:parseInt(t.product.width)-100,usableHeight:parseInt(t.product.width)-200,inputWidth:t.input.width,inputHeight:t.input.height,railroad:t.product.railroad}}function a(t){var e=t.system,i=t.input.height;return 1019367991845e-4*e.torque/(t.product.weight*parseFloat(e.priceCoefficient)*i+1e3*e.bottomBarWeight)/((t.product.thickness+e.tubeDiameter/2)/1e3)}function o(t){var e=t.system;return Math.pow(e.bending*e.tube384Ei/(5*r.reduce([t.product.weight/1e8*parseFloat(e.priceCoefficient)*t.input.height,e.bottomBarWeight/1e5,e.tubeWeight/1e5],function(i,s){return i+s},0)),1/4)}function u(t){var e=t.system,i=t.input.width,s=t.product.thickness;return(101.9367991845*e.torque/((s*parseFloat(e.priceCoefficient)+e.tubeDiameter/2)/1e3)-.001*i*e.bottomBarWeight)/(1e-6*t.product.weight*i)}function h(t){var e=t.system,i=t.input.width;return(2e8*e.tube384Ei*e.bending-1e4*Math.pow(i,4)*(e.bottomBarWeight+e.tubeWeight))/(t.product.weight*parseFloat(e.priceCoefficient)*Math.pow(i,4))/10}function m(t){var e=t.system;return Math.PI*(Math.pow(e.systemDiameter,2)-Math.pow(e.tubeDiameter,2))/(4*t.product.thickness*parseFloat(e.priceCoefficient))}function c(t){var e=t.system;return Math.PI*20*(e.systemDiameter+t.product.thickness*(20-1))}});
