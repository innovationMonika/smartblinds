define(["underscore"],function(r){"use strict";return{init:function(t){this.$valueField=t},_isChainProduct:function(){let t=new URLSearchParams(window.location.hash.substring(1)),e=t.get("sku")?t.get("sku").toLowerCase():null;return e&&e.includes("chain")},get:function(){if(!this.$valueField)return null;const t=window.jsonConfig;let e=o(this.$valueField);if(this.$valueField.data("control_type")&&parseInt(t.systems[0].isChainCustomerGroup)===1){const n=this.$valueField.data("control_type");e.controlType=s(n)?n:t.systems[0].controlTypeData.options[n]}else{let n=this._isChainProduct()?"chain":"motor";e.controlType=t.systems[0].controlTypeData.options[n]}return i(e)},getByType:function(t){const e=window.jsonConfig;let n=o(this.$valueField);return n.controlType=e.systems[0].controlTypeData.options[t],i(n)},getCommonMinWidth:function(){return this.getSystemsByControlType().reduce((t,e)=>t.minWidth<e.minWidth?t:e).minWidth},getCommonMaxWidth:function(){return this.getSystemsByControlType().reduce((t,e)=>t.maxWidth>e.maxWidth?t:e).maxWidth},getSystemsByControlType:function(){return window.jsonConfig.systems.filter(t=>t.controlType===this.getControlType(t))},getControlType:function(t){if(this.$valueField.data("control_type")&&parseInt(t.isChainCustomerGroup)===1){const e=this.$valueField.data("control_type");return s(e)?e:t.controlTypeData.options[e]}else{let e=this._isChainProduct()?"chain":"motor";return t.controlTypeData.options[e]}},getCommonMinHeight:function(){return window.jsonConfig.systems.reduce((t,e)=>t.minHeight<e.minHeight?t:e).minHeight},getCommonMaxHeight:function(){return window.jsonConfig.systems.reduce((t,e)=>t.maxHeight>e.maxHeight?t:e).maxHeight}};function o(t){const e=window.jsonConfig;let n={};return e.systems[0].systemCategory!=="venetian_blinds"&&(n.systemType=t.data("system_type")),e.systems[0].systemCategory!=="venetian_blinds"&&e.systems[0].systemCategory!=="honeycomb_blinds"&&(n.systemSize=t.data("system_size")),n}function i(t){var e=window.jsonConfig;return r.find(e.systems,t)}function s(t){return/^-?\d+$/.test(t)}});
