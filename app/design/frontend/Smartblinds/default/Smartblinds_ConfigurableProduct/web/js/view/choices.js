define(["jquery","underscore","mage/translate","mage/mage"],function(e,r,l){"use strict";var n=e(window);return e.widget("mage.productChoices",{options:{selectors:{swatchOptions:'div[data-role="swatch-options"]',choicesItems:'[data-role="choices-items"]',topProductOptions:".product-option.top",bottomProductOptions:".product-option.bottom",swatchAttribute:".swatch-attribute"}},_create:function(){this.$choicesItems=e(this.options.selectors.choicesItems),this._rebuildChoicesItems(),n.on("updatePrice",this._rebuildChoicesItems.bind(this))},_rebuildChoicesItems:function(){var t="",o=[],a=this,u=[{selector:this.options.selectors.topProductOptions,labelSelector:".label",valueSelector:"#value"},{selector:this.options.selectors.swatchAttribute,labelSelector:".swatch-attribute-label",valueSelector:".swatch-attribute-selected-option"},{selector:this.options.selectors.bottomProductOptions,labelSelector:".label",valueSelector:"#value"}];r.each(u,function(c){e(c.selector).each(function(){var s=e(this),h=s.find(c.labelSelector).text(),i=s.find(c.valueSelector).text().trim();if(i){if(r.contains(["system_type","system_size"],s.data("attribute-code"))){o.push(i);return}s.data("attribute-code")==="system_color"&&(t+="%SYSTEM_PLACEHOLDER_SUMMARY%"),s.data("attribute-code")!=="control_type"&&(t+=a._getItemHtml(h,i))}})}),o.length&&(t=t.replace("%SYSTEM_PLACEHOLDER_SUMMARY%",a._getItemHtml(l("System:"),o.reverse().join(", ")))),this.$choicesItems.html(t)},_getItemHtml:function(t,o){return'<div class="choice-item"><span class="choice-label">'+t+'</span><span class="choice-value">'+o+"</span></div>"}}),e.mage.productChoices});
