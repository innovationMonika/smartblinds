define(["jquery","underscore","getSwatchSelectedProductId","swiper","mage/mage"],function(e,h,c,r){"use strict";var t=e(window);return e.widget("mage.productChoicesGallery",{options:{selectors:{swatchOptions:'div[data-role="swatch-options"]'}},_create:function(){this.$choicesGallery=e(this.options.selectors.choicesGallery),t.on("swatches-click",this._rebuildGallery.bind(this)),e(".choices-swiper").on("click",".swiper-slide",this._openModal.bind(this)),t.on("load-choices",()=>{this.canLoadChoices=!0,this._rebuildGallery()})},_openModal:function(){e(".fotorama__stage__frame").click()},_rebuildGallery:function(){var i;if(this.options.isChoices&&!this.canLoadChoices)return;const l=window.jsonConfig,a=c(),s=(i=l.images)==null?void 0:i[a];if(s===void 0)return;let o="";s.forEach(n=>{o+=this._getImageHtml(n)}),this.$choicesGallery.html(o),this.createGallery()},_getImageHtml:function(i){return'<div class="swiper-slide"><img src="'+i.img+'" width="220" height="220" /></div>'},createGallery:function(){new r(".choices-swiper",{slidesPerView:3,observer:!0,spaceBetween:10})}}),e.mage.productChoicesGallery});
