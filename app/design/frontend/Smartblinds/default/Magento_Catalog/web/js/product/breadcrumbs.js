define(["jquery","Magento_Theme/js/model/breadcrumb-list","mage/translate"],function(o,i,u){"use strict";return function(s){return o.widget("mage.breadcrumbs",s,{options:{categoryUrlSuffix:"",useCategoryPathInUrl:!1,product:"",categoryItemSelector:".category-item",menuContainer:'[data-action="navigation"] > ul'},_render:function(){this._appendCatalogCrumbs(),this._super()},_appendCatalogCrumbs:function(){var t=this._resolveCategoryCrumbs();t.forEach(function(e){i.push(e)}),this.options.product&&i.push(this._getProductCrumb())},_resolveCategoryCrumbs:function(){var t=this._resolveCategoryMenuItem(),e=[];if(t!==null&&t.length)for(e.unshift(this._getCategoryCrumb(t));(t=this._getParentMenuItem(t))!==null;)e.unshift(this._getCategoryCrumb(t));return e},_getCategoryCrumb:function(t){return{name:"category",prefix:u("More"),label:t.text(),link:t.attr("href"),title:""}},_getProductCrumb:function(){return{name:"product",label:this.options.product,prefix:"",link:"",title:""}},_getParentMenuItem:function(t){var e,r,a,n=null;return t?(e=t.parent().attr("class"),r=e.match(/(nav\-)[0-9]+(\-[0-9]+)+/gi),r&&(r=r[0],a=r.substr(0,r.lastIndexOf("-")),a.lastIndexOf("-")!==-1&&(n=o(this.options.menuContainer).find("."+a+" > a"),n=n.length?n:null)),n):null},_resolveCategoryMenuItem:function(){var t=this._resolveCategoryUrl(),e=o(this.options.menuContainer),r=null;return t&&e.length&&(r=e.find(this.options.categoryItemSelector+' > a[href="'+t+'"]')),r},_resolveCategoryUrl:function(){var t;return this.options.useCategoryPathInUrl?(t=window.location.href.split("?")[0],t=t.substring(0,t.lastIndexOf("/"))+this.options.categoryUrlSuffix):(window.breadcrumbsCategoryUrl?t=window.breadcrumbsCategoryUrl:t=document.referrer,t.indexOf("?")>0&&(t=t.substr(0,t.indexOf("?")))),t}}),o.mage.breadcrumbs}});
