define(["underscore","jquery","mage/translate","uiComponent","sampleBasket","knockout","domReady!"],function(i,p,t,b,l,d){"use strict";var h=p(window);return b.extend({defaults:{links:{successMessage:"basket-form:successMessage"}},initialize:function(){return this._super().initVariables().initEvents(),this},initObservable:function(){return this._super().observe(["items","successMessage"].join(" "))},initVariables:function(){return this.updateBasketItems(),this.itemGroups=d.computed(this.buildItemGroups.bind(this)),this},initEvents:function(){return h.on("sample-basket-updated",this.updateBasketItems.bind(this)),this},updateBasketItems:function(){this.items(l.getSimpleItems())},buildItemGroups:function(){var n={};return i.each(this.items(),function(e){var s=e.systemCategory,a=s;s==="honeycomb_blinds"&&(e==null?void 0:e.transparency)&&(a=s+"_"+(e==null?void 0:e.transparency.replace(/\s/g,"").toLowerCase()));var r=n.hasOwnProperty(a)?n[a]:null;r||(r={label:this._getSystemLabel(e),groups:{},positions:[]},n[a]=r);var c={id:e.id,label:e.name,image:e.swatches.color.imageUrl,url:e.url};if(["honeycomb_blinds","duoroller","venetian_blinds"].includes(s)){r.positions.push(c);return}var o=e.swatches.transparency.optionId,u=r.groups.hasOwnProperty(o)?r.groups[o]:null;u||(u={label:this._getTranslatedTransparencyLabel(e.swatches.transparency.optionLabel),positions:[]},r.groups[o]=u),r.groups[o].positions.push(c)},this),i.each(n,function(e){e.groups=i.values(e.groups)}),this._updateNames(n)},removeItem:function(n){l.removeItem(n.id)},_getSystemLabel(n){switch(n==null?void 0:n.systemCategory){case"duoroller":return t("Duo Rollerblind");case"venetian_blinds":return t("Venetian blind");case"honeycomb_blinds":switch(n==null?void 0:n.transparency){case"Lightfiltering":return t("Lightfiltering Honeycomb blind");case"Obscuring":return t("Obscuring Honeycomb blind");default:return t("Honeycomb blind")}return t("Honeycomb blind");default:return t("Rollerblind")}},_getTranslatedTransparencyLabel(n){var e={Lightfiltering:t("Lightfiltering"),Obscuring:t("Obscuring"),Translucent:t("Translucent")};return e.hasOwnProperty(n)?e[n]:n},_getTee(n,e){},_updateNames(n){return i.each(i.values(n),function(e){e.groups.length?i.each(e.groups,function(s){s.positions.length&&i.each(s.positions,function(a){a.name=a.label+" - "+s.label+" "+e.label})}):e.positions.length&&i.each(e.positions,function(s){s.name=s.label+" - "+e.label})}),i.values(n)}})});
